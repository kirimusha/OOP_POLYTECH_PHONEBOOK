#include <QApplication>  // Главный класс приложения Qt
#include "Qt.h"          // Наш класс главного окна

/*
    функция main - точка входа в программу

    argc - количество аргументов командной строки
    argv - массив аргументов командной строки
    возвращает код завершения программы (0 = успех)
 */
int main(int argc, char *argv[])
{
    /*
    Создаем объект QApplication
    Это обязательный объект для любого Qt-приложения с графическим интерфейсом
    Он управляет:
    - Инициализацией Qt
    - Обработкой событий (клики мыши, нажатия клавиш)
    - Настройками приложения
    - Главным циклом событий
    */
    QApplication app(argc, argv);
    
    /*
    Создаем объект главного окна нашего приложения
    QtPhoneBook - это класс, который мы определили в Qt.h
    В конструкторе происходит:
    - Создание менеджера контактов
    - Инициализация всего интерфейса (setupUI)
    - Загрузка контактов из файла (refreshContactList)
    */
    QtPhoneBook window;
    
    /*
    Показываем окно на экране
    По умолчанию созданные виджеты Qt скрыты
    Метод show() делает окно видимым
     */
    window.show();
    
    /*
    Запускаем главный цикл обработки событий Qt
    app.exec() - это бесконечный цикл, который:
        1. Ждет событий (клики, нажатия клавиш, таймеры и т.д.)
        2. Обрабатывает эти события (вызывает соответствующие слоты)
        3. Перерисовывает интерфейс при необходимости
     
    Цикл работает до тех пор, пока:
    - Пользователь не закроет окно
    - Не будет вызван QApplication::quit()
     
    После завершения цикла возвращается код завершения программы
    */
    return app.exec();
}

/*
общая структура Qt-приложения:

1. main() создает QApplication - "движок" приложения
2. Создается главное окно (QtPhoneBook)
3. Окно отображается на экране (show)
4. Запускается цикл событий (exec)
5. Программа работает, пока пользователь не закроет окно
6. После закрытия окна управление возвращается из exec()
7. Деструкторы автоматически освобождают память
8. Программа завершается
 
важно: все объекты Qt (window, app) созданы на стеке (не через new)
Это значит, что они автоматически удалятся при выходе из main()
 */